# Configuração do Sistema de Validação de Performance ML
# Arquivo: configs/validation_config.yaml

# Token de acesso da Meta Ads API
meta_access_token: "EAAV..."  # TODO: Substituir pelo token real

# Account IDs Meta Ads (usar ambos na validação)
meta_account_ids:
  - act_188005769808959  # Ads - Rodolfo Mori
  - act_786790755803474  # Ads - Gestor de IA

# Configurações globais
product_value: 2000.00  # Valor do produto em R$
max_match_days: 30      # Janela máxima para matching leads-vendas

# Agrupar campanhas "Otimização ML" junto com "Controle" na comparação?
# False (padrão): Otimização ML é filtrado da comparação (apenas Eventos ML vs Controle)
# True: Otimização ML é agrupado com Controle (Eventos ML vs [Controle + Otimização ML])
merge_otimizacao_ml_with_controle: false

# Padrões de campanha
campaign_filters:
  base_pattern: "DEVLF | CAP | FRIO"  # Filtro base (campanhas de captação)
  ml_pattern: "MACHINE LEARNING"       # Padrão para COM ML
  non_ml_patterns:                     # Padrões para SEM ML
    - "ESCALA SCORE"
    - "FAIXA A"
    - "FAIXA B"
    - "FAIXA C"
    - "FAIXA D"

# Caminhos dos arquivos (únicos, contêm todo o período)
paths:
  leads: "files/validation/leads"      # CSV do Google Sheets
  vendas: "files/validation/vendas"    # Excel Guru + TMB

# ============================================================================
# PERÍODOS DE ANÁLISE
# ============================================================================

periodos:
  periodo_atual:
    name: "Dezembro 2025"
    start_date: "2025-12-02"      # Captação: 02/12 a 08/12
    end_date: "2025-12-08"
    sales_start_date: "2025-12-15"  # Vendas: 15/12 a 21/12
    sales_end_date: "2025-12-21"

# ============================================================================
# TAXAS DE CONVERSÃO ESPERADAS (CORRIGIDAS POR RECALL)
# ============================================================================
#
# Fonte: V2/api/business_config.py - CONVERSION_RATES (linhas 71-82)
# Última atualização: 2025-11-10
#
# METODOLOGIA:
#   - Taxas observadas no test set: Conversões reais durante treinamento
#   - Recall de matching: 55.7% (769 conversões observadas / 1,380 vendas reais)
#   - Fator de correção: 1.795x (1 / 0.557)
#   - Taxa corrigida = Taxa observada × 1.795
#
# POR QUE CORRIGIR POR RECALL?
#   O sistema de matching lead→venda é imperfeito devido a:
#   - Emails diferentes entre pesquisa e compra
#   - Telefones inválidos/incomparáveis
#   - Dados ausentes
#
#   Logo, as taxas corrigidas refletem a performance ESPERADA considerando
#   as limitações do matching em produção.
#
# NOTA: Quebras de monotonia (D3 < D2, D5 < D4) são do dataset real.
# ============================================================================

expected_conversion_rates:
  D1: 0.003836   # 0.38% | Corrigido de 0.21% (×1.795)
  D2: 0.004933   # 0.49% | Corrigido de 0.27% (×1.795)
  D3: 0.003838   # 0.38% | Corrigido de 0.21% (×1.795) - quebra monotonia vs D2
  D4: 0.010415   # 1.04% | Corrigido de 0.58% (×1.795)
  D5: 0.005480   # 0.55% | Corrigido de 0.31% (×1.795) - quebra monotonia vs D4
  D6: 0.012064   # 1.21% | Corrigido de 0.67% (×1.795)
  D7: 0.012059   # 1.21% | Corrigido de 0.67% (×1.795)
  D8: 0.018636   # 1.86% | Corrigido de 1.04% (×1.795)
  D9: 0.025207   # 2.52% | Corrigido de 1.40% (×1.795)
  D10: 0.034551  # 3.45% | Corrigido de 1.92% (×1.795)

# ============================================================================
# CAMPANHAS E ADSETS - EVENTOS ML (Período: Dezembro 2025)
# ============================================================================
#
# Lista de campanhas Eventos ML e seus respectivos adsets
# Atualizado: 2025-12-26
#
# Total: 4 campanhas | 9 adsets únicos
# ============================================================================

eventos_ml_campaigns:
  # Rodolfo Mori - Campanha 1
  - campaign_id: "120236428684090"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | MACHINE LEARNING | PG2 | 2025-11-27"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120236428684680000"
        adset_name: "ABERTO | AD0043"
      - adset_id: "120236428684690000"
        adset_name: "ABERTO | AD0027"
      - adset_id: "120236428684710000"
        adset_name: "ABERTO | AD0022"

  # Rodolfo Mori - Campanha 2
  - campaign_id: "120236428684840"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | MACHINE LEARNING | PG2 | 2025-11-27"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120236428684380000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"

  # Rodolfo Mori - Campanha 3
  - campaign_id: "120236428684850"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | MACHINE LEARNING | PG2 | 2025-11-27"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120236428684120000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"
      - adset_id: "120236428684130000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"
      - adset_id: "120236428684240000"
        adset_name: "ADV | Linguagem de programação"

  # Gestor de IA - Campanha 4
  - campaign_id: "120234062599950"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ML | S/ ABERTO | PG2 | 2025-11-11"
    account: "Gestor de IA"
    adsets:
      - adset_id: "120234062599910000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"
      - adset_id: "120234062599980000"
        adset_name: "ADV | Linguagem de programação"

# ============================================================================
# CAMPANHAS E ADSETS - CONTROLE (Período: Dezembro 2025)
# ============================================================================
#
# Lista de campanhas Controle e seus respectivos adsets
# Atualizado: 2025-12-26
#
# Total: 10 campanhas | 42 adsets únicos
# ============================================================================

controle_campaigns:
  # Rodolfo Mori - Campanha 1 (ABERTO - SCORE)
  - campaign_id: "120220370119870"
    campaign_name: "DEVLF | CAP | FRIO | FASE 01 | ABERTO ADV+ | PG2 | SCORE | 2025-04-15"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120224713940020000"
        adset_name: "ABERTO | AD0027"
      - adset_id: "120229309350630000"
        adset_name: "ABERTO | AD0022"
      - adset_id: "120229582299160000"
        adset_name: "ABERTO | AD0046"
      - adset_id: "120231731369010000"
        adset_name: "ABERTO | AD0065"
      - adset_id: "120235542072360000"
        adset_name: "ABERTO | AD0095"
      - adset_id: "120235543061080000"
        adset_name: "ABERTO | AD0096"
      - adset_id: "120235543793400000"
        adset_name: "ABERTO | AD0098"
      - adset_id: "120235544902750000"
        adset_name: "ABERTO | AD0101"
      - adset_id: "120235906690790000"
        adset_name: "ABERTO | AD0104"
      - adset_id: "120236864407460000"
        adset_name: "ABERTO | AD0106"
      - adset_id: "120236864736440000"
        adset_name: "ABERTO | AD0107"
      - adset_id: "120236864988010000"
        adset_name: "ABERTO | AD0109"
      - adset_id: "120236865005080000"
        adset_name: "ABERTO | AD0110"
      - adset_id: "120236865195540000"
        adset_name: "ABERTO | AD0111"
      - adset_id: "120236865399320000"
        adset_name: "ABERTO | AD0112"
      - adset_id: "120236865409140000"
        adset_name: "ABERTO | AD0113"
      - adset_id: "120236865561110000"
        adset_name: "ABERTO | AD0114"
      - adset_id: "120236865581770000"
        adset_name: "ABERTO | AD0115"
      - adset_id: "120236865595440000"
        adset_name: "ABERTO | AD0116"
      - adset_id: "120236865600860000"
        adset_name: "ABERTO | AD0117"
      - adset_id: "120236865747370000"
        adset_name: "ABERTO | AD0118"
      - adset_id: "120236865794170000"
        adset_name: "ABERTO | AD0119"
      - adset_id: "120236865831880000"
        adset_name: "ABERTO | AD0120"
      - adset_id: "120236865849800000"
        adset_name: "ABERTO | AD0121"

  # Rodolfo Mori - Campanha 2
  - campaign_id: "120224064761980"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ESCALA SCORE | PG2 | 2025-05-13"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120224064761970000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"
      - adset_id: "120224064762460000"
        adset_name: "ADV | Linguagem de programação"
      - adset_id: "120224064763040000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"

  # Rodolfo Mori - Campanha 2
  - campaign_id: "120224064762010"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ESCALA SCORE | PG2 | 2025-05-13"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120224064762480000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"

  # Rodolfo Mori - Campanha 3
  - campaign_id: "120224064762600"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ESCALA SCORE | PG2 | 2025-05-13"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120224064762530000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"
      - adset_id: "120224064762830000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"
      - adset_id: "120224064762850000"
        adset_name: "ADV | Linguagem de programação"

  # Rodolfo Mori - Campanha 4
  - campaign_id: "120224064762630"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ESCALA SCORE | PG2 | 2025-04-13"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120224064762060000"
        adset_name: "ADV | Lookalike 2% Alunos + Interesse Linguagem de Programação"
      - adset_id: "120224064762510000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"

  # Rodolfo Mori - Campanha 5
  - campaign_id: "120228073033890"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | ESCALA SCORE | PG2 | 2025-07-08"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120228073033800000"
        adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"

  # Rodolfo Mori - Campanha 6
  - campaign_id: "120230454190910"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | FAIXA A | PG2 | 2025-08-13"
    account: "Rodolfo Mori"
    adsets:
      - adset_id: "120230454190970000"
        adset_name: "ADV | Linguagem de programação"
      - adset_id: "120230454190980000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"

  # Gestor de IA - Campanha 7
  - campaign_id: "120232220702050"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | FAIXA A | S/ ABERTO | PG2 | 2025-10-14"
    account: "Gestor de IA"
    adsets:
      - adset_id: "120232220702070000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"
      - adset_id: "120232223086860000"
        adset_name: "ADV | Linguagem de programação"

  # Gestor de IA - Campanha 8
  - campaign_id: "120232666823120"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | FAIXA A | S/ ABERTO | PG2 | 2025-10-22"
    account: "Gestor de IA"
    adsets:
      - adset_id: "120232666823260000"
        adset_name: "ADV | Linguagem de programação"
      - adset_id: "120232666823310000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"

  # Gestor de IA - Campanha 9
  - campaign_id: "120232666823150"
    campaign_name: "DEVLF | CAP | FRIO | FASE 04 | ADV | FAIXA A | S/ ABERTO | PG2 | 2025-10-22"
    account: "Gestor de IA"
    adsets:
      - adset_id: "120232666823140000"
        adset_name: "ADV | Linguagem de programação"
      - adset_id: "120232666823200000"
        adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"

# ============================================================================
# ADSETS MATCHED - EVENTOS ML vs CONTROLE (Período: Dezembro 2025)
# ============================================================================
#
# Adsets que aparecem TANTO em campanhas Eventos ML QUANTO em Controle
# Permite comparação justa de performance (mesmo targeting/criativo)
# Atualizado: 2025-12-26
#
# Total: 5 adsets matched
# ============================================================================

matched_adsets:
  # Matched Adset 1
  - adset_name: "ADV | Lookalike 2% Cadastrados - DEV 2.0 + Interesses"
    eventos_ml:
      - campaign_id: "120236428684840"
        adset_id: "120236428684380000"
        account: "Rodolfo Mori"
      - campaign_id: "120236428684850"
        adset_id: "120236428684120000"
        account: "Rodolfo Mori"
    controle:
      - campaign_id: "120224064761980"
        adset_id: "120224064761970000"
        account: "Rodolfo Mori"
      - campaign_id: "120224064762010"
        adset_id: "120224064762480000"
        account: "Rodolfo Mori"
      - campaign_id: "120224064762600"
        adset_id: "120224064762830000"
        account: "Rodolfo Mori"
      - campaign_id: "120224064762630"
        adset_id: "120224064762510000"
        account: "Rodolfo Mori"
      - campaign_id: "120228073033890"
        adset_id: "120228073033800000"
        account: "Rodolfo Mori"

  # Matched Adset 2
  - adset_name: "ADV | Lookalike 1% Cadastrados - DEV 2.0 + Interesse Ciência da Computação"
    eventos_ml:
      - campaign_id: "120236428684850"
        adset_id: "120236428684130000"
        account: "Rodolfo Mori"
      - campaign_id: "120234062599950"
        adset_id: "120234062599910000"
        account: "Gestor de IA"
    controle:
      - campaign_id: "120224064761980"
        adset_id: "120224064763040000"
        account: "Rodolfo Mori"
      - campaign_id: "120224064762600"
        adset_id: "120224064762530000"
        account: "Rodolfo Mori"
      - campaign_id: "120230454190910"
        adset_id: "120230454190980000"
        account: "Rodolfo Mori"
      - campaign_id: "120232220702050"
        adset_id: "120232220702070000"
        account: "Gestor de IA"
      - campaign_id: "120232666823120"
        adset_id: "120232666823310000"
        account: "Gestor de IA"
      - campaign_id: "120232666823150"
        adset_id: "120232666823200000"
        account: "Gestor de IA"

  # Matched Adset 3
  - adset_name: "ADV | Linguagem de programação"
    eventos_ml:
      - campaign_id: "120236428684850"
        adset_id: "120236428684240000"
        account: "Rodolfo Mori"
      - campaign_id: "120234062599950"
        adset_id: "120234062599980000"
        account: "Gestor de IA"
    controle:
      - campaign_id: "120224064761980"
        adset_id: "120224064762460000"
        account: "Rodolfo Mori"
      - campaign_id: "120224064762600"
        adset_id: "120224064762850000"
        account: "Rodolfo Mori"
      - campaign_id: "120230454190910"
        adset_id: "120230454190970000"
        account: "Rodolfo Mori"
      - campaign_id: "120232220702050"
        adset_id: "120232223086860000"
        account: "Gestor de IA"
      - campaign_id: "120232666823120"
        adset_id: "120232666823260000"
        account: "Gestor de IA"
      - campaign_id: "120232666823150"
        adset_id: "120232666823140000"
        account: "Gestor de IA"

  # Matched Adset 4
  - adset_name: "ABERTO | AD0022"
    eventos_ml:
      - campaign_id: "120236428684090"
        adset_id: "120236428684710000"
        account: "Rodolfo Mori"
    controle:
      - campaign_id: "120220370119870"
        adset_id: "120229309350630000"
        account: "Rodolfo Mori"

  # Matched Adset 5
  - adset_name: "ABERTO | AD0027"
    eventos_ml:
      - campaign_id: "120236428684090"
        adset_id: "120236428684690000"
        account: "Rodolfo Mori"
    controle:
      - campaign_id: "120220370119870"
        adset_id: "120224713940020000"
        account: "Rodolfo Mori"
